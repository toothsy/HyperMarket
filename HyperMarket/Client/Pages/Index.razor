@page "/"
@using HyperMarket.DB.Models
@using HyperMarket.Shared
@using System.ComponentModel.DataAnnotations
@using HyperMarket.UIControls.LoadingIcon
@inject HyperMarket.Data.Interfaces.IBusinessDetailService businessService
@inject Blazored.SessionStorage.ISessionStorageService sessionStorage
<PageTitle>HyperMarket</PageTitle>

<div class="backgroundclolor_height">
    <div class="d-flex justify-center align-center flex-column ">

        @if (businesses == null)
        {
            <Loading />
        }
        else
        {

            <MudCard Class="d-flex flex-row flex-wrap">
                <div class="row">
                    @foreach (var business in businesses)
                    {
                        @if (business.TopBrands)
                        {
                            <BusinessCard business=business />
                        }
                    }
                </div>
            </MudCard>
        }
    </div>
</div>


@code {

    public List<BusinessDetail> businesses;

    protected override async Task OnInitializedAsync()
    {
        businesses = await businessService.GetBusinesses();


    }
}

