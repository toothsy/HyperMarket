@page "/MyBusiness"
@using HyperMarket.DB.Models
@using HyperMarket.Shared
@using System.ComponentModel.DataAnnotations
@inject HyperMarket.DB.Interfaces.IUserService userService
@inject HyperMarket.Data.Interfaces.IBusinessDetailService businessService


<div class="bg">
    <div class="first">
        <MudGrid Class="d-flex justify-center align-center">
            <MudItem class="second">
                <MudCard>
                    <h2 class="log">My Business</h2>
                    <MudCardContent>
                        <h6 class="side">Username</h6> <MudTextField @bind-Value="user.UserName" Label="" ReadOnly="true" Variant="Variant.Filled" Margin="Margin.Dense">@user.UserName</MudTextField>
                        <h6 class="side">Business Name</h6> <MudTextField @bind-Value="business.BusinessName" Label="" Variant="Variant.Filled" Margin="Margin.Dense"></MudTextField>
                        <h6 class="side">Business Description</h6>  <MudTextField @bind-Value="business.BusinessDescription" Label="" Variant="Variant.Filled" Margin="Margin.Dense"></MudTextField>
                        <h6 class="side">Mail Id</h6> <MudTextField @bind-Value="user.EmailId" Label="" Variant="Variant.Filled" Margin="Margin.Dense"></MudTextField>
                        <h6 class="side">Location</h6> <MudTextField @bind-Value="business.LocationId" Label="" ReadOnly="true" Variant="Variant.Filled" />
                    </MudCardContent>
                    <MudCardActions>
                        <div class="btn">
                            <MudButton ButtonType="ButtonType.Submit" Align="align.Center"><div class="btncolor">Update</div></MudButton>
                        </div>
                    </MudCardActions>
                </MudCard>
            </MudItem>
        </MudGrid>
    </div>
</div>


@code {
    public List<User> users = new List<User>();
    public User user = new User();
    public List<BusinessDetail> Businesses = new List<BusinessDetail>();
    public BusinessDetail business = new BusinessDetail();

    protected override async Task OnInitializedAsync()
    {
        business = await businessService.GetBusinessById(501);
        user = await userService.GetUserById(1001);
    }

    private async Task OnValidSubmit(EditContext context)
    {
        await businessService.UpdateBusiness(business);
    }

    }